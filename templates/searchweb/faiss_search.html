{% load static %}
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>關鍵字查詢</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="{% static 'css/faiss_search.css' %}">
</head>
<body>
    <h2>語意查詢（Faiss）</h2>
    <div style="text-align: center; margin-bottom: 1.5rem;">
        <a href="{% url 'topic_list' %}" class="btn btn-secondary">← 回主題</a>
    </div>

    <form method="get" action="{% url 'faiss_search' %}">
        <input type="text" name="q" placeholder="請輸入查詢內容" value="{{ query }}">
        <button type="submit">查詢</button>
    </form>

    {% if results %}
    <h2>查詢結果：</h2>
    <div class="list-group">
        {% for page in results %}
            <a href="{% url 'gitbookpage' pk=page.id %}" 
               class="list-group-item list-group-item-action">
                {{ page.title }} 
                <span class="badge bg-secondary">距離：{{ page.distance|floatformat:3 }}</span>
            </a>
        {% endfor %}
    </div>
    {% elif query %}
        <p style="text-align: center; color: #1D6A96;">⚠ 沒有查到任何結果。</p>
    {% endif %}


</body>
</html>
